{namespace mask=MASK\Mask\ViewHelpers}
{namespace core = TYPO3\CMS\Core\ViewHelpers}
<f:layout name="Default"/>
<f:section name="content">
    <f:render partial="General/Tabs" arguments="{active: 'WizardPage'}"/>
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="DTM-mask-1">
            <div class="form-section">
                <f:flashMessages/>
                <div class="panel panel-space panel-default">
                    <div class="panel-heading">
                        <f:translate key="tx_mask.all.pagetemplates"/>
                    </div>
                    <f:if condition="{backendLayouts -> f:count()}==0">
                        <f:then>
                            <div class="typo3-message message-warning"><strong>
                                <f:translate key="tx_mask.page.warning"/>
                            </strong>
                                <f:translate key="tx_mask.page.nobackendlayout"/>
                            </div>
                        </f:then>
                        <f:else>
                            <div class="table-fit collapse in" id="recordlist-be_users" data-state="expanded">
                                <table cellspacing="0" cellpadding="0" border="0" class="table table-striped table-hover">
                                    <thead>
                                    <tr>
                                        <th class="text-nowrap col-icon">
                                            <f:translate key="tx_mask.page.image"/>
                                        </th>
                                        <th class="text-nowrap">
                                            <f:translate key="tx_mask.page.titleuid"/>
                                        </th>
                                        <th class="text-nowrap col-title">
                                            <f:translate key="tx_mask.page.description"/>
                                        </th>
                                        <th class="text-nowrap col-control">&nbsp;</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <f:for each="{backendLayouts}" as="layout" key="key">
                                        <tr>
                                            <td>
                                                <f:if condition="{layout.iconPath}">
                                                    <f:then>
                                                        <f:image src="{layout.iconPath}" height="30" maxWidth="50"/>
                                                    </f:then>
                                                    <f:else>
                                                        <span class="t3js-icon icon icon-size-large icon-state-default">
                                                            <span class="icon-markup">
                                                                <span class="icon-unify" style="color: #ccc"><i class="fa fa-th-large"></i></span>
                                                            </span>
                                                        </span>
                                                    </f:else>
                                                </f:if>
                                            </td>
                                            <td>
                                                <f:link.action action="edit"
                                                               arguments="{layoutIdentifier: layout.identifier}">
                                                    <p><strong>
                                                        <mask:translateLabel key="{layout.title}"/>
                                                    </strong><br/>{layout.identifier}
                                                    </p>
                                                </f:link.action>
                                            </td>
                                            <td><p>{layout.description}</p></td>
                                            <td class="text-nowrap">
                                                <div class="btn-group" role="group">
                                                    <f:link.action action="showHtml" arguments="{key: key, table: 'pages'}"
                                                                   onclick="window.open(this.href, 'HTML', 'width=800,height=600,resizable=yes,scrollbars=yes');return false;"
                                                                   class="btn btn-default">
                                                        <core:icon identifier="sysnote-type-2"/>
                                                    </f:link.action>
                                                    <f:link.action action="edit"
                                                                   arguments="{layoutIdentifier: layout.identifier}"
                                                                   class="btn btn-default">
                                                        <core:icon identifier="actions-open"/>
                                                    </f:link.action>
                                                </div>
                                            </td>
                                        </tr>
                                    </f:for>
                                    </tbody>
                                </table>
                            </div>
                        </f:else>
                    </f:if>
                </div>
            </div>
        </div>
    </div>
</f:section>
